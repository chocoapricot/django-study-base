{% extends 'common/_base.html' %}

{% block content %}

    {% if information_list %}
    <div class="content-box card bg-light mt-2 mb-4">
        <div class="card-header d-flex justify-content-between align-items-center">
            <span>お知らせ</span>
        </div>
        <div class="card-body">
            <ul class="list-group list-group-flush">
                {% for info in information_list %}
                <li class="list-group-item bg-light d-flex justify-content-between align-items-start">
                    <div class="ms-2 me-auto">
                        <div class="fw-bold">
                            <a href="{% url 'home:information_detail' info.pk %}" class="text-decoration-none">{{ info.subject }}</a>
                        </div>
                        <small class="text-muted">
                            {% if info.start_date %}
                                {{ info.start_date|date:"Y/m/d" }}
                            {% else %}
                                {{ info.updated_at|date:"Y/m/d" }}
                            {% endif %}
                        </small>
                    </div>
                    {% if info.company_name %}
                    <span class="badge bg-secondary rounded-pill">{{ info.company_name }}</span>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        </div>
        {% if information_count > 5 %}
        <div class="card-footer text-center">
            <a href="{% url 'home:information_list' %}" class="text-decoration-none">全て表示</a>
        </div>
        {% endif %}
    </div>
    {% endif %}

    <div class="content-box card bg-light mt-2 mb-4" style="max-width: 100%;">
        <div class="card-header">サマリー</div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="card bg-light h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span>
                                <i class="bi bi-building text-primary"></i>
                                クライアント
                            </span>
                        </div>
                        <div class="card-body">
                            <div class="row text-center mb-3">
                                <div class="col-6">
                                    <h4 class="text-primary">{{ client_count }}</h4>
                                    <small class="text-muted">登録済み</small>
                                </div>
                                <div class="col-6">
                                    <h4 class="text-success">{{ approved_client_count }}</h4>
                                    <small class="text-muted">接続承認済みユーザ</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 mb-4">
                    <div class="card bg-light h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span>
                                <i class="bi bi-people text-success"></i>
                                スタッフ
                            </span>
                        </div>
                        <div class="card-body">
                            <div class="row text-center mb-3">
                                <div class="col-4">
                                    <h4 class="text-primary">{{ staff_count }}</h4>
                                    <small class="text-muted">登録済み</small>
                                </div>
                                <div class="col-4">
                                    <h4 class="text-success">{{ approved_staff_count }}</h4>
                                    <small class="text-muted">接続承認済み</small>
                                </div>
                                <div class="col-4">
                                    {% if staff_request_count > 0 and perms.staff.view_staff %}
                                    <a href="{% url 'staff:staff_list' %}?has_request=true" class="text-decoration-none">
                                        <h4 class="text-warning">{{ staff_request_count }}</h4>
                                        <small class="text-muted">申請あり</small>
                                    </a>
                                    {% else %}
                                        <h4 class="text-warning">{{ staff_request_count }}</h4>
                                        <small class="text-muted">申請あり</small>
                                    {% endif %}
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="content-box card bg-light mt-2 mb-4" style="max-width: 100%;">
        <div class="card-header">利用技術</div>
        <div class="card-body">
            <div class="row">
                <div class="col-3">
                    <h4 class="card-title">Base</h4>
                    <p class="card-text">
                        <ul>
                            <li>Django 5.2 (BSD 3-Clause License)</li>
                            <li>Python 3.12</li>
                            <li>Bootstrap 5.3 (MIT License)</li>
                            <li>Bootstrap Icon (MIT License)</li>
                            <li>Bootswatch for 5.3 (MIT License)</li>
                            <li>SQLite3 (Public Domain)</li>
                            
                        </ul>
                    </p>
                    <h4 class="card-title">Coding</h4>
                    <p class="card-text">
                        <ul>
                            <li>Amazon kiro (with Claude Sonnet 4.0)</li>
                            <li>Google Julas (with Gemini 2.5 pro)</li>
                            <li>VSCode (with Github Copilot Agent)</li>
                            <li>VSCode (with Gemini CLI 2.5)</li>
                        </ul>
                    </p>
                </div>
                <div class="col-5">
                    <h4 class="card-title">Middleware</h4>
                    <p class="card-text">
                        <ul>
                            <li>django-allauth：認証機能 (MIT License)</li>
                            <li>django-import-export：管理画面のインポートエクスポート (MIT License)</li>
                            <li>django-currentuser：最終更新ユーザ (MIT License)</li>
                            <li>django-concurrency：楽観ロック (Apache License 2.0)</li>
                            <li>pillow：画像処理ライブラリ (MIT License)</li>
                            <li>requests：HTTP通信ライブラリ (Apache License 2.0)</li>
                            <li>python-stdnum：各種標準番号の検証 (LGPL-3.0 License)</li>
                            <li>openpyxl：Excelファイル操作ライブラリ (MIT License)</li>
                            <li>pdfrw：PDFファイル操作ライブラリ (MIT License)</li>
                            <li>PyMuPDF：PDF/XPS/EPUB/FB2/CBZ/CBRドキュメント操作ライブラリ (GNU Affero General Public License v3.0)</li>
                            <li>django-storages：ファイルストレージ抽象化ライブラリ (BSD 3-Clause License)</li>
                            <li>tablib：表形式データのエクスポート/インポートライブラリ (MIT License)</li>
                        </ul>
                    </p>
                    <h4 class="card-title">API</h4>
                    <p class="card-text">
                        <ul>
                            <li>gBizINFO：法人番号から企業情報取得：https://info.gbiz.go.jp/ (著作権は経済産業省に帰属します。)</li>
                            <li>zipcloud：郵便番号から住所取得：https://zipcloud.ibsnet.co.jp/ (MIT License)</li>
                            <li>銀行情報検索：DBの銀行情報から検索：/api/search_banks/ (自作API)</li>
                            <li>銀行支店検索：DBの支店情報から検索：/api/search_bank_branchs/ (自作API)</li>
                        </ul>
                    </p>
                </div>

                <div class="col-4">
                    <h4 class="card-title">Custom Tags</h4>
                    <p class="card-text">
                        <ul>
                            <li>Tooltip：{% templatetag openblock %} load help_tags {% templatetag closeblock %}<br>
                                例:{% templatetag openblock %} my_help_preset "corporate_number" %}
                            </li>
                            <li>Parameter：{% templatetag openblock %} load parameters {% templatetag closeblock %}<br>
                                例:{% templatetag openblock %} parameter 'SYSTEM_NAME' %}
                            </li>
                            <li>Badge color：{% templatetag openblock %} load badge_tags {% templatetag closeblock %}<br>
                                例:&ltspan class="badge {% templatetag openvariable %} client.regist_form_client|badge_class {% templatetag closevariable %}"
                            </li>
                            <li>Dropdown selected：{% templatetag openblock %} load dropdowns {% templatetag closeblock %}<br>
                                例:{% templatetag openblock %} my_name 'sex' staff.sex %}
                            </li>
                        </ul>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="content-box card bg-light mt-2 mb-4" style="max-width: 100%;">
        <div class="card-header">規定・書式</div>
        <div class="card-body">
            <div class="row">
                <div class="col-6">
                    <h4 class="card-title">Staff</h4>
                    <p class="card-text">
                        <ul>
                            <li><i class="bi bi-file-earmark-excel"></i> 履歴書
                                <a href="https://doda.jp/guide/rireki/template/" target="_blank" class="text-decoration-none" style="color:green;margin-left: 5px;">
                                    厚生労働省の履歴書テンプレート Excel A4 <i class="bi bi-box-arrow-up-right"></i>
                                </a>
                            </li>
                            <li><i class="bi bi-file-earmark-excel"></i> 求職申込書
                                <a href="https://jsite.mhlw.go.jp/tokyo-roudoukyoku/riyousha_mokuteki_menu/mokuteki_naiyou/haken_part/syokai-youshikirei.html" target="_blank" class="text-decoration-none" style="color:green;margin-left: 5px;">
                                    東京労働局　求職申込書【Excel形式】 <i class="bi bi-box-arrow-up-right"></i>
                                </a>
                            </li>
                            <li><i class="bi bi-file-earmark-pdf"></i> 給与所得者の扶養控除等(異動)申告書
                                <a href="https://www.nta.go.jp/taxes/tetsuzuki/shinsei/annai/gensen/annai/1648_01.htm" target="_blank" class="text-decoration-none" style="color:green;margin-left: 5px;">
                                    国税庁(令和7年分) <i class="bi bi-box-arrow-up-right"></i>
                                </a>
                            </li>
                        </ul>
                    </p>

                    <h4 class="card-title">Master</h4>
                    <p class="card-text">
                        <ul>
                            <li><i class="bi bi-database"></i> 総務省職業分類
                                <a href="https://www.soumu.go.jp/toukei_toukatsu/index/seido/shokgyou/21index.htm" target="_blank" class="text-decoration-none" style="color:green;margin-left: 5px;">
                                    日本標準職業分類（平成21年12月告示） <i class="bi bi-box-arrow-up-right"></i>
                                </a>
                            </li>
                            <li><i class="bi bi-database"></i> 厚労省職業分類
                                <a href="https://www.hellowork.mhlw.go.jp/info/mhlw_job_dictionary.html" target="_blank" class="text-decoration-none" style="color:green;margin-left: 5px;">
                                    厚生労働省編職業分類（令和４年改定） <i class="bi bi-box-arrow-up-right"></i>
                                </a>
                            </li>
                        </ul>
                    </p>

                </div>

            </div>
        </div>
    </div>
    

{% endblock %}
