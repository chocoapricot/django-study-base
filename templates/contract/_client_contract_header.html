{% load humanize %}
{% load dropdowns %}
{% load badge_tags %}

<div class="row">
    <div class="col-md-6">
        <h6 class="text-muted mb-3">基本情報</h6>
        <table class="table table-sm">
            <tr>
                <th>契約番号</th>
                <td>{{ contract.contract_number|default:"-" }}</td>
            </tr>
            <tr>
                <th>クライアント</th>
                <td>
                    <a href="{% url 'client:client_detail' contract.client.pk %}" class="text-decoration-none">
                        {{ contract.client.name }}
                    </a>
                </td>
            </tr>
            <tr>
                <th class="w-25">契約名</th>
                <td>{{ contract.contract_name }}</td>
            </tr>
            <tr>
                <th>職種</th>
                <td>{{ contract.job_category.name|default:"-" }}</td>
            </tr>
            <tr>
                <th>契約状況</th>
                <td>
                    <span class="badge {{ contract.contract_status|badge_class }}">
                        {% my_name 'contract_status' contract.contract_status %}
                    </span>
                </td>
            </tr>
        </table>
    </div>
    <div class="col-md-6">
        <h6 class="text-muted mb-3">契約条件</h6>
        <table class="table table-sm">
            <tr>
                <th class="w-25">
                    {% if contract.contract_pattern.contract_type_code == Constants.CLIENT_CONTRACT_TYPE.DISPATCH %}
                        派遣期間
                    {% else %}
                        契約期間
                    {% endif %}
                </th>
                <td>
                    {{ contract.start_date|date:"Y年m月d日" }}
                     ～ 
                    {% if contract.end_date %}
                        {{ contract.end_date|date:"Y年m月d日" }}
                    {% else %}
                        無期限
                    {% endif %}
                    {% if contract.client_contract_type_code == Constants.CLIENT_CONTRACT_TYPE.DISPATCH and contract.duration <= 30 %}
                        <span class="badge bg-danger">日雇派遣</span>
                    {% endif %}
                </td>
            </tr>
            <tr>
                <th>契約金額</th>
                <td>
                    {% if contract.contract_amount %}
                        {% my_name 'bill_unit' contract.bill_unit %}
                        ¥{{ contract.contract_amount|floatformat:0|intcomma }}
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
            <tr>
                <th>契約種別</th>
                <td>
                    <span class="badge {{contract.client_contract_type_code|badge_class}}">
                        {{ contract.contract_type_display_name }}
                    </span>
                    {{ contract.contract_pattern.name|default:"-" }}
                </td>
            </tr>
            <tr>
                <th>支払条件</th>
                <td>
                    {% if contract.payment_site %}
                        {{ contract.payment_site.name }}
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
        </table>
    </div>
</div>