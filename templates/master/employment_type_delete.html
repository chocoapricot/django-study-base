{% extends 'common/_base.html' %}
{% load static %}
{% load time_tags %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="content-box card bg-light mt-2 mb-4" style="max-width: 100%;">
    <div class="card-header">{{ title }}</div>
    <div class="card-body">
        <div class="alert alert-warning" role="alert">
            <i class="bi bi-exclamation-triangle-fill"></i>
            雇用形態「{{ item.name|truncatechars:30 }}」を削除しますか？この操作は取り消せません。
        </div>

        <div class="row mb-3 align-items-center">
            <div class="col-sm-3 text-start text-md-end">
                <strong>名称</strong>
            </div>
            <div class="col-sm-9">
                {{ item.name }}
            </div>
        </div>

        <div class="row mb-3 align-items-center">
            <div class="col-sm-3 text-start text-md-end">
                <strong>就業時間パターン</strong>
            </div>
            <div class="col-sm-9">
                {% if item.worktime_pattern %}
                    <div>{{ item.worktime_pattern.name }}</div>
                    {% if item.worktime_pattern.work_times.all %}
                        <div class="mt-2">
                            {% for wt in item.worktime_pattern.work_times.all %}
                                <div class="mb-1">
                                    {% if wt.time_name %}<strong>{{ wt.time_name.content }}:</strong> {% endif %}
                                    <span>{{ wt.start_time|format_time_with_next_day:wt.start_time_next_day }} - {{ wt.end_time|format_time_with_next_day:wt.end_time_next_day }}</span>
                                    {% if wt.break_times.all %}
                                        <span class="text-muted small">(休憩: 
                                            {% for bt in wt.break_times.all %}
                                                {% if not forloop.first %}, {% endif %}{{ bt.start_time|format_time_with_next_day:bt.start_time_next_day }}-{{ bt.end_time|format_time_with_next_day:bt.end_time_next_day }}
                                            {% endfor %}
                                        )</span>
                                    {% endif %}
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% else %}
                    <span class="text-muted">未設定</span>
                {% endif %}
            </div>
        </div>

        <form method="post">
            {% csrf_token %}
            <div class="row mt-3">
                <div class="col text-left">
                    <button type="submit" class="btn btn-sm btn-dark me-2">削除</button>
                    <a href="{% url 'master:employment_type_list' %}" class="btn btn-sm btn-secondary">戻る</a>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}
