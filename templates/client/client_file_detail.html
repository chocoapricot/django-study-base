{% extends 'common/_base.html' %}
{% load static %}

{% block content %}
<div class="row" style="max-width: 100%;">
    <div class="col-12">
        <!-- クライアント情報カード -->
        {% include 'client/_client_info_card.html' %}
        
        <!-- ファイル詳細 -->
        <div class="content-box card bg-light mt-2 mb-4">
            <div class="card-header">
                ファイル詳細
            </div>
            <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-sm-2 text-end"><strong>ファイル名:</strong></div>
                        <div class="col-sm-10">
                            {% if client_file.is_image %}
                                <i class="bi bi-image text-success"></i>
                            {% elif client_file.is_document %}
                                <i class="bi bi-file-text text-primary"></i>
                            {% else %}
                                <i class="bi bi-file text-secondary"></i>
                            {% endif %}
                            {{ client_file.original_filename }}
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-sm-2 text-end"><strong>説明:</strong></div>
                        <div class="col-sm-10">{{ client_file.description|default:"-" }}</div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-sm-2 text-end"><strong>ファイルサイズ:</strong></div>
                        <div class="col-sm-10">{{ client_file.file_size_mb }} MB</div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-sm-2 text-end"><strong>アップロード日時:</strong></div>
                        <div class="col-sm-10">{{ client_file.uploaded_at|date:"Y年m月d日 H:i" }}</div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-sm-2 text-end"><strong>登録者:</strong></div>
                        <div class="col-sm-10">{{ client_file.created_by|default:"-" }}</div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-sm-2 text-end"><strong>更新者:</strong></div>
                        <div class="col-sm-10">{{ client_file.updated_by|default:"-" }}</div>
                    </div>

                    <!-- 画像プレビュー -->
                    {% if client_file.is_image %}
                    <div class="row mb-3">
                        <div class="col-sm-2 text-end"><strong>プレビュー:</strong></div>
                        <div class="col-sm-10">
                            <img src="{{ client_file.file.url }}" alt="{{ client_file.original_filename }}" 
                                 class="img-thumbnail" style="max-width: 300px; max-height: 300px;">
                        </div>
                    </div>
                    {% endif %}

                    <!-- アクションボタン -->
                    <div class="row">
                        <div class="col-sm-10 offset-sm-2">
                            <a href="{% url 'client:client_file_download' pk=client_file.pk %}" class="btn btn-sm btn-success">
                                <i class="bi bi-download"></i> ダウンロード
                            </a>
                            <a href="{% url 'client:client_file_update' pk=client_file.pk %}" class="btn btn-sm btn-warning">
                                <i class="bi bi-pencil"></i> 編集
                            </a>
                            <a href="{% url 'client:client_file_delete' pk=client_file.pk %}" class="btn btn-sm btn-dark">
                                <i class="bi bi-trash"></i> 削除
                            </a>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>

<!-- 戻るボタン -->
<div class="row mt-3">
    <div class="col text-left">
        <a href="{% url 'client:client_file_list' client_pk=client.pk %}" class="btn btn-sm btn-secondary">ファイル一覧に戻る</a>
        <a href="{% url 'client:client_detail' pk=client.pk %}" class="btn btn-sm btn-secondary ms-2">クライアント詳細に戻る</a>
    </div>
</div>
{% endblock %}