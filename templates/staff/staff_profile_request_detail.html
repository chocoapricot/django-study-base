{% extends 'common/_base.html' %}
{% load static %}
{% load connect_tags %}

{% block content %}
{% include 'staff/_staff_info_card.html' with staff=staff %}

<div class="content-box card bg-light mt-2 mb-4" style="max-width: 100%;">
    <div class="card-header d-flex justify-content-between align-items-center">
        プロフィール申請の確認
    </div>
    <div class="card-body">
        <div class="row mb-3 align-items-center">
            <div class="col-sm-2 text-start text-md-end">
                <strong>申請日時</strong>
            </div>
            <div class="col-sm-10">
                {{ profile_request.created_at|date:"Y/m/d H:i" }}
            </div>
        </div>
        <div class="row mb-3 align-items-center">
            <div class="col-sm-2 text-start text-md-end">
                <strong>現在のステータス</strong>
            </div>
            <div class="col-sm-10">
                <span class="badge bg-warning text-dark">{{ profile_request.get_status_display }}</span>
            </div>
        </div>

        <h5>申請内容</h5>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>項目</th>
                    <th>現在の情報</th>
                    <th>申請された情報</th>
                </tr>
            </thead>
            <tbody>
                <tr class="{% diff_class staff.name_last profile_request.staff_profile.name_last %}{% diff_class staff.name_first profile_request.staff_profile.name_first %}">
                    <td>氏名</td>
                    <td>{{ staff.name_last }} {{ staff.name_first }}</td>
                    <td>{{ profile_request.staff_profile.name_last }} {{ profile_request.staff_profile.name_first }}</td>
                </tr>
                <tr class="{% diff_class staff.name_kana_last profile_request.staff_profile.name_kana_last %}{% diff_class staff.name_kana_first profile_request.staff_profile.name_kana_first %}">
                    <td>氏名（カナ）</td>
                    <td>{{ staff.name_kana_last }} {{ staff.name_kana_first }}</td>
                    <td>{{ profile_request.staff_profile.name_kana_last }} {{ profile_request.staff_profile.name_kana_first }}</td>
                </tr>
                <tr class="{% diff_class staff.birth_date profile_request.staff_profile.birth_date %}">
                    <td>生年月日</td>
                    <td>{{ staff.birth_date }}</td>
                    <td>{{ profile_request.staff_profile.birth_date }}</td>
                </tr>
                <tr class="{% diff_class staff.sex profile_request.staff_profile.sex %}">
                    <td>性別</td>
                    <td>{{ staff.sex_display }}</td>
                    <td>{{ profile_request.staff_profile.sex_display }}</td>
                </tr>
                <tr class="{% diff_class staff.postal_code profile_request.staff_profile.postal_code %}">
                    <td>郵便番号</td>
                    <td>{{ staff.postal_code }}</td>
                    <td>{{ profile_request.staff_profile.postal_code }}</td>
                </tr>
                <tr class="{% diff_class staff.address1 profile_request.staff_profile.address1 %}{% diff_class staff.address2 profile_request.staff_profile.address2 %}{% diff_class staff.address3 profile_request.staff_profile.address3 %}">
                    <td>住所</td>
                    <td>{{ staff.address1 }}{{ staff.address2 }}{{ staff.address3 }}</td>
                    <td>{{ profile_request.staff_profile.address1 }}{{ profile_request.staff_profile.address2 }}{{ profile_request.staff_profile.address3 }}</td>
                </tr>
                <tr class="{% diff_class staff.phone profile_request.staff_profile.phone %}">
                    <td>電話番号</td>
                    <td>{{ staff.phone }}</td>
                    <td>{{ profile_request.staff_profile.phone }}</td>
                </tr>
            </tbody>
        </table>

        <form method="post">
            {% csrf_token %}
            <div class="d-flex justify-content-start mt-4">
                <button type="submit" name="action" value="approve" class="btn btn-sm btn-success me-2">
                    承認
                </button>
                <button type="submit" name="action" value="reject" class="btn btn-sm btn-danger me-2">
                    却下
                </button>
                <a href="{% url 'staff:staff_detail' staff.pk %}" class="btn btn-sm btn-secondary">
                    戻る
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
