# 最初（忘れているものもあるかも）
django-admin startproject django_study_base
cd django_study_base
python manage.py startapp myapp
python.exe -m pip install --upgrade pip

# 環境つくりなおし
python -3.14 -m venv .venv
.venv\Scripts\Activate 
python.exe -m pip install --upgrade pip
pip install -r requirements.txt

# 今回はいらないけど。2.2.5はNG。2.2.4
pip install mysqlclient
# インポート/エクスポート
pip install django-import-export
# 最終更新ユーザ
pip install django-currentuser
# 顔写真
pip install pillow
# API処理用？
pip install requests
# PDF
pip install reportlab
# Excel埋め込み用
pip install openpyxl
# PDFフォーム埋め込み用⇒Acrobatで表示されない
pip install pdfrw
#    pip uninstall pdfrw
# PDF読み取り化用⇒遅くて無理
#    pip install pypdf
#    pip uninstall pypdf
pip install pymupdf
# バージョンカラム追加
pip install django-concurrency
# 認証
pip install django-allauth
# カバレッジ
pip install coverage

パンくずリスト
django-sitetree,django-bootstrap-breadcrumbs,django-breadcrumbs、django-view-breadcrumbsはNG。
でやってみるがだめだった

pip install --upgrade pip
pip install -r requirements.txt

# アップデート確認とアップデート
pip list --outdated
pip install --upgrade XXX

# DBリセットして作成
python _scripts/reset_database.py
python manage.py makemigrations
python manage.py migrate

# 最初のユーザ作成
# python manage.py createsuperuser
$env:DJANGO_SUPERUSER_PASSWORD="admin"
python manage.py createsuperuser --noinput --username admin --email admin@example.com

# DBデータ読み込み
python _scripts/load_sample_data.py

# エクスポート
python manage.py export_group_permissions --output _sample_data/group_permissions.json
python manage.py dumpdata settings.dropdowns    --format=json --indent=4 > _sample_data/dropdowns.json
python manage.py dumpdata settings.menu         --format=json --indent=4 > _sample_data/menus.json
python manage.py dumpdata settings.parameters   --format=json --indent=4 > _sample_data/parameters.json
python manage.py dumpdata staff                 --format=json --indent=4 > _sample_data/staff.json
python manage.py dumpdata staff.staffevaluation --format=json --indent=4 > _sample_data/staff_evaluation.json
python manage.py dumpdata client.client         --format=json --indent=4 > _sample_data/client.json
python manage.py dumpdata client.clientdepartment      --format=json --indent=4 > _sample_data/client_department.json
python manage.py dumpdata client.clientuser            --format=json --indent=4 > _sample_data/client_user.json
python manage.py dumpdata company.company              --format=json --indent=4 > _sample_data/company.json
python manage.py dumpdata company.companydepartment    --format=json --indent=4 > _sample_data/company_department.json
python manage.py dumpdata company.companyuser          --format=json --indent=4 > _sample_data/company_user.json
python manage.py dumpdata contract.staffcontract       --format=json --indent=4 > _sample_data/contract_staff.json
python manage.py dumpdata contract.clientcontract      --format=json --indent=4 > _sample_data/contract_client.json
python manage.py dumpdata contract.clientcontracthaken --format=json --indent=4 > _sample_data/contract_client_haken.json
python manage.py dumpdata contract.contractassignment  --format=json --indent=4 > _sample_data/contract_assignment.json

python manage.py dumpdata master.contractpattern       --format=json --indent=4 > _sample_data/master_contract_pattern.json
python manage.py dumpdata master.contractterms         --format=json --indent=4 > _sample_data/master_contract_terms.json
python manage.py dumpdata master.jobcategory　         --format=json --indent=4 > _sample_data/master_job_category.json

python manage.py dumpdata master.defaultvalue              --format=json --indent=4 > _sample_data/master_default_value.json
python manage.py dumpdata master.userparameter             --format=json --indent=4 > _sample_data/master_user_parameter.json
python manage.py dumpdata master.employmenttype            --format=json --indent=4 > _sample_data/master_employment_type.json
python manage.py dumpdata master.staffregiststatus         --format=json --indent=4 > _sample_data/master_staff_regist_status.json
python manage.py dumpdata master.clientregiststatus        --format=json --indent=4 > _sample_data/master_client_regist_status.json
python manage.py dumpdata master.phrasetemplatetitle       --format=json --indent=4 > _sample_data/master_phrase_template_title.json
python manage.py dumpdata master.phrasetemplate            --format=json --indent=4 > _sample_data/master_phrase_template.json
python manage.py dumpdata master.worktimepattern           --format=json --indent=4 > _sample_data/master_worktime_pattern.json
python manage.py dumpdata master.worktimepatternwork       --format=json --indent=4 > _sample_data/master_worktime_pattern_work.json
python manage.py dumpdata master.worktimepatternbreak      --format=json --indent=4 > _sample_data/master_worktime_pattern_break.json
python manage.py dumpdata master.overtimepattern           --format=json --indent=4 > _sample_data/master_overtime_pattern.json
python manage.py dumpdata master.timepunch                 --format=json --indent=4 > _sample_data/master_time_punch.json

#   UTF16からUTF8に変更してから取り込む必要あり

# データベースアクセス
python manage.py dbshell

#テストデータ作成（スタッフ評価）
.venv\Scripts\Activate 
python _scripts/make_sample_data_staff_evaluation.py

# テスト実施
python manage.py test 
python manage.py test apps.api.tests
python manage.py test apps.kintai.tests

# サーバ起動
.venv\Scripts\Activate 
python manage.py makemigrations
python manage.py migrate
python manage.py runserver

# 起動のみ
.venv\Scripts\Activate 
python manage.py runserver

# まとめ
.venv\Scripts\Activate 
.\_scripts\setup.bat
python manage.py runserver

# EOF
